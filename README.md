# Easy-Chat

项目名称：Easy-Chat

demo源作者：(https://github.com/baobaoJK/EZ-Chat)

README更新日期：2023/6/14

描述：这是基于上述链接提供的demo实现的，有群聊私聊功能，并具有端到端加密功能的一个Web聊天室。



## 开发环境

开发软件：IntelliJ IDEA Community Edition 2021.2.2（后端）， WebStorm 2023.1.2（前端）

Node 版本：18.16.0

Java 版本：JDK 1.8.0

SpringBoot 版本：2.7.12



## 内容介绍

chat-ui 是前端网页

chat-server 是后端服务


## 端到端加密实现

每个聊天室都有一个**leader**，每个进入聊天室的用户都会在进入时使用**jsrsasign**库，以**RSA**加密方式生成自己独有的公钥和私钥，以及用**tweetnacl**库生成一个**EdDSA**加密用的公钥私钥对，并把这两个公钥上传到服务器，服务器将用户列表以及公钥信息转发给所有用户。每当聊天室内发生人员变动，**leader**就会随机生成一个**32**位的会议密钥，并把这个密钥用每一个参与聊天的用户提供的自己的**RSA**公钥加密会议密钥，然后把这个加密后的会议密钥分发给对应的用户。每一个用户收到被加密过的会议密钥后，用自己的私钥解密得到会议密钥的内容并更新会议密钥。在此之后，如果成员**A**希望发送消息给成员**B**，那么会使用**CryptoJS**库的**AES**方法用会议密钥加密，用**EdDSA**私钥给信息签名，并发送给对方。**B**收到加密信息后，先用自己有的对方的**EdDSA**公钥信息验证签名是否正确，然后用**CryptoJS**库的**AES**方法用会议密钥进行解密，得到**A**想发送给**B**的信息。在上述过程中，服务器只会保存参会者的名字，以及他们所提供的加密会议密钥用的公钥信息和签名验证用的公钥信息。这样一来，攻击者从服务器无法得知除了信息来源和去向以外的任何信息，对信息的任何修改操作也会被用户发现并拒绝接受消息。通过这种方式，结合非对称加密和对称加密实现了较为安全的端到端加密。

值得一提的是，既然使用的是**http**，这意味着用户这边也容易被攻击。本项目的端到端实现逻辑仅是我们理解协议相关内容后做出的模拟实现，并不能做到绝对安全。


## 项目部署



### 前端

chat-ui

#### 安装
```
npm install
```


#### 开启服务

```
npm run serve
```



### 后端

chat-server

IDEA 打开 运行 ChatServerApplication.java



### 温馨提示

#### 1.

打开chat-server前确认chat-server和Easy-Chat-main文件夹内没有.idea文件夹，如果有就删掉先。不删可能导致idea找不到项目。

#### 2.

打开chat-server后 左上角文件-项目结构-模块-依赖，删掉所有带“junit”或者“api”关键字的所有依赖，然后在ChatServerApplicationTests.java中找到报错的地方alt+enter。不这样做可能导致报错junit不存在（哪怕他已经出现在原来的依赖中了）。

#### 3.

电脑没装Node.js请直接关闭这个页面去装。环境问题不多做解释。

#### 4.

请保证你的项目路径里没有一点中文。不这样做可能会报index.html重名错误。

#### 5.

chat-ui跑npm run serve之前记得npm install。不这样做你是肯定跑不起来的。

#### 6.

右键pom.xml->Maven->下载源代码和文档->重新加载项目。说不定啥时候就用上了呢。

#### 7.

关于application.yml里的三个“*”，第一个填你的数据库URL，第二个填你注册sql时的用户名，第三个填你注册sql的密码。

#### 8.

填好第七条里的内容之后请确认你的数据库是真实有效的，否则会连接失败。所有历史注册过的账号信息都会存在你的数据库里。

#### 9.

注册三个输入分别是：昵称，自定义账号id，密码；登录用自定义账号id和密码。局内会显示你的昵称。


